/**!
 * artemdemo.popup 
 * version: 0.1.0
 * date: 2015-07-24
 * url: https://github.com/artemdemo/angular-popup
 * 
 */
!function(){var a=angular.module("artemdemo.popup",[]),b=function(a,b,c,d,e){var f,g,h={},i="closed",j=null,k={};k.backdrop=['<div class="popup-backdrop"></div>'].join(""),k.popup=["<popup>","<form>",'<div class="popup-container" ng-class="POPUP_TYPE">','<div class="popup">','<div class="popup-head">','<h3 class="popup-title ng-binding" ng-bind-html="TITLE"></h3>',"</div>",'<div class="popup-body">','<span ng-bind-html="BODY_TXT"></span>',"</div>",'<div class="popup-buttons"></div>',"</div>","</div>","</form>","</popup>"].join(""),k.buttons={},k.buttons.confirm=['<div class="row">','<div class="col-xs-6">','<button ng-click="okAction($event)" class="btn btn-ok" ng-class="okType || \'btn-block btn-primary\'">{{ OK_TXT }}</button>',"</div>",'<div class="col-xs-6">','<div ng-click="cancelAction($event)" class="btn btn-cancel" ng-class="cancelType || \'btn-block btn-default\'">{{ CANCEL_TXT }}</div>',"</div>","</div>"].join(""),k.buttons.show=['<button ng-click="okAction($event)" class="btn btn-ok" ng-class="okType || \'btn-block btn-primary\'">{{ OK_TXT }}</button>'].join(""),h.show=function(a){var b;if(j=c.defer(),"open"==i)return!1;i="open",a=angular.isObject(a)?a:{},b=l("show"),f.TITLE=a.hasOwnProperty("title")?a.title:"",f.BODY_TXT=a.hasOwnProperty("template")?e.trustAsHtml(a.template):"",f.OK_TXT=a.hasOwnProperty("okText")?a.okText:"Ok",f.okType=a.hasOwnProperty("okType")?a.okType:"";for(var d=0;d<b.length;d++)document.body.appendChild(b[d]);return g.find("button")[0].focus(),f.okAction=function(){j.resolve(),h.hide()},j.promise},h.confirm=function(a){var b,k;if(j=c.defer(),"open"==i)return!1;i="open",a=angular.isObject(a)?a:{},b=l("confirm"),f.TITLE=a.hasOwnProperty("title")?a.title:"",f.BODY_TXT=a.hasOwnProperty("template")?e.trustAsHtml(a.template):"",f.CANCEL_TXT=a.hasOwnProperty("cancelText")?a.cancelText:"Cancel",f.cancelType=a.hasOwnProperty("cancelType")?a.cancelType:"",f.OK_TXT=a.hasOwnProperty("okText")?a.okText:"Ok",f.okType=a.hasOwnProperty("okType")?a.okType:"";for(var m=0;m<b.length;m++)document.body.appendChild(b[m]);return f.cancelAction=function(){j.reject(),h.hide()},d(function(){k=g.find("input"),k.length>0?k[0].focus():g.find("button")[0].focus()}),f.okAction=function(b){var c=!1;c=a.hasOwnProperty("okTap")&&angular.isFunction(a.okTap)?a.okTap(b):!0,j.resolve(c),c&&h.hide()},j.promise},h.hide=function(){f.$destroy(),i="closed";for(var a=0;a<g.length;a++)g.remove();angular.element(document.getElementsByTagName("body")[0]).unbind("keyup")};var l=function(c){var d,e,i,l;g=angular.element(k.popup),i=angular.element(k.backdrop),l=angular.element(k.buttons[c]),g.append(i);for(var m=0;m<l.length;m++)g[0].getElementsByClassName("popup-buttons")[0].appendChild(l[m]);return d=b(g),f=a.$new(),e=d(f),f.POPUP_TYPE="popup-type-"+c,angular.element(document.getElementsByTagName("body")[0]).bind("keyup",function(a){27==a.keyCode&&(j.reject(),h.hide())}),e};return h};a.factory("$popup",["$rootScope","$compile","$q","$timeout","$sce",b])}();